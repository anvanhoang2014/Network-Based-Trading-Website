<%- include('../partials/header.ejs') %>

<div class = "content">
    <% if(trades.length) {%>
        <h2>Select an Item to Trade</h2>

        <%
            var categ = [], categoryArr = [], l = trades.length, i;
            for( i=0; i<l; i++) {
                if( categ[trades[i].category]) continue;
                categ[trades[i].category] = true;
                categoryArr.push(trades[i].category);
            }
            //console.log(categoryArr);
        %>

        <%
            for (i=0; i<categoryArr.length; i++) {%>
                <h4><%= categoryArr[i]%></h4>
            <% trades.forEach(tradeItem=>{%>
                <% if(tradeItem.category === categoryArr[i]){ %>
                    <a href="/trading/<%= tradeItem.id%>"><p><%= tradeItem.title%></p></a>
            <%}
            });

            }

    } else {%>
        <p>There are not trade items to display.</p>
    <% }%>
</div>

<%- include('../partials/footer.ejs') %>

